TOPICS
------
    * INSTALLATION
    * UBUNTU 22.04. Other distros/versions may vary. 
    * CUPS USB NOTES
    * HP LASERJET 1000/1005/1018/1020, P1005/P1006/P1007/P1008/P1505 NOTES
    * HP SMART INSTALL NOTES
    * PSUTILS AND 2/4-UP CAPABILITY
    * CUSTOM PAGE SIZE
    * SET DEFAULT MEDIA WITH CUPS
    * MANUAL DUPLEX
    * UPDATE
    * UNINSTALLING
    * BUG REPORTS
    * DEVELOPER AND DEBUGGING TIPS
    * CUSTOM ICC/ICM COLOR PRINTER PROFILE (BUY)
    * CUSTOM ICC/ICM COLOR PRINTER PROFILE (ARGYLL)

INSTALLATION
------------
UBUNTU 22.04. Other distros/versions may vary. 
Optimised for Fuji Xerox CP105b

Pre-requisites: (note: do NOT install foomatic-filters. 
It will uninstall cups, as cups has its own filters now)

	$ sudo apt install cups cups-client cups-filters build-essential tix groff dc

Uninstall system repo version of this driver pack:
	$ sudo apt remove printer-driver-foo2zjs	
	
Grab these files:
    $ cd /tmp
    $ git clone https://github.com/UltraSalem/foo2zjs.git
    $ cd foo2zjs

(Optional) Uninstall this pack if you've previously installed from here:
    $ sudo make uninstall
    
Compile:
    $ make

Install driver, foomatic XML files, PPD files, and extra files:
    $ sudo make install
    # make install

If you use CUPS to manage your printers, you must restart cupsd:
    $ sudo systemctl restart cups

Unplug and re-plug the USB printer

If your system doesn't automatically pick it up, run:
    $ system-config-printer



CUPS USB NOTES
--------------
    If you are using the USB port, then the URI should be:
	file:/dev/usb/lp0	OR	usb:/dev/usb/lp0
	file:/dev/usb/lp1	OR	usb:/dev/usb/lp1
    OR
	usb://Samsung/CLP-310%20Series
	usb://Samsung/CLP-310%20Series
	usb://HP/Color%20LaserJet%20CP1215
	usb://HP/Color%20LaserJet%202600n
	usb://HP/LaserJet%201000
	usb://HP/LaserJet%201005
	usb://HP/LaserJet%201018
	usb://HP/LaserJet%201020
	usb://HP/LaserJet%20P1005
	usb://HP/LaserJet%20P1006
	usb://HP/LaserJet%20P1007
	usb://HP/LaserJet%20P1008
	usb://HP/LaserJet%20P1505
	usb://HP/LaserJet%20Professional%20P1102w

    Don't use hp://<whatever> because that is for hplip (a closed source,
    proprietary driver).

    Do a "make cups" as root if you haven't done it before.

HP LASERJET 1000/1005/1018/1020, P1005/P1006/P1007/P1008/P1505 NOTES
--------------------------------------------------------------------
    These printers need their firmware downloaded to them every time they
    are powered up.

	On Linux with USB connected printer:
	    If you are running Linux and the printer is connected via USB, you
	    can arrange for the firmware to be automatically downloaded to the
	    printer by performing one more installation step:

	    # make install-hotplug

	    Power off then on the printer. Light should flash orange for
	    ~5 seconds as the firmware is getting downloaded.

	On another OS or with a parallel port connected printer:

	    You must send a firmware file to the printer each time you power it
	    up.  If you downloaded the extra files for the HP above, a typical
	    command line to load the firmware would be ONE of these:

	    # cat /usr/share/foo2zjs/firmware/sihp1000.dl > /dev/usb/lp0
	    # cat /usr/share/foo2zjs/firmware/sihp1005.dl > /dev/usb/lp0
	    # cat /usr/share/foo2zjs/firmware/sihp1018.dl > /dev/usb/lp0
	    # cat /usr/share/foo2zjs/firmware/sihp1020.dl > /dev/usb/lp0
	    # cat /usr/share/foo2xqx/firmware/sihpP1005.dl > /dev/usb/lp0
	    # cat /usr/share/foo2xqx/firmware/sihpP1006.dl > /dev/usb/lp0
	    # cat /usr/share/foo2xqx/firmware/sihpP1505.dl > /dev/usb/lp0

	    Light should flash orange for ~5 seconds as the firmware is
	    getting downloaded.

	On Mac OS X:

	    You must send a firmware file to the printer each time you power it
	    up.  If you downloaded the extra files for the HP above, a typical
	    command line to load the firmware would be:

		$ lp -oraw /usr/share/foo2zjs/firmware/sihp1018.dl
		$ lp -oraw /usr/share/foo2zjs/firmware/sihp1020.dl
		$ lp -oraw /usr/share/foo2xqx/firmware/sihpP1005.dl
		$ lp -oraw /usr/share/foo2xqx/firmware/sihpP1006.dl
		$ lp -oraw /usr/share/foo2xqx/firmware/sihpP1505.dl

	    -OR-

		Add a line to /etc/rc.local and reboot:

		    killall osx-hplj-hotplug; \
			osx-hplj-hotplug >/tmp/osx-hplj-hotplug 2>&1 &

	    -OR-

		Issue a "make install-hotplug" command:
	    
		$ sudo make install-hotplug

	    Light should flash orange for ~5 seconds as the firmware is
	    getting downloaded.

    Firmware Not Downloaded:
	# usb_printerid /dev/usb/lp0
	GET_DEVICE_ID string:
	MFG:Hewlett-Packard;MDL:HP LaserJet 1020;CMD:ACL;CLS: PRINTER;\
		    DES:HP LaserJet 1020;

    Firmware Downloaded:
	# usb_printerid /dev/usb/lp0
	GET_DEVICE_ID string:
	MFG:Hewlett-Packard;MDL:HP LaserJet 1020;CMD:ACL;CLS: PRINTER;\
		    DES:HP LaserJet 1020;FWVER:20050309;

    NOTE: The original HP files are named '*.img'.  Sometimes HP supplies
    these files ready-to-download to the printer, sometimes they are raw
    ARM executables and need to have a special header added to them before
    they can be downloaded.  The "make install" step will use the supplied
    "arm2hpdl" program to automatically detect which kind of file they are
    and convert them (if needed) to the downloadable '*.dl' format.

    These printers do not have a "button" when you run out of paper.
    But, there is a GNOME gui in:

	Applications -> System Tools -> HPLJ 10xx Replaced Paper

    It requires tcl, tk, and tix.  Fedora 5 and later:
	# yum install tcl tk tix

    or, you can simulate this by reloading the paper and doing:

	$ usb_printerid /dev/usb/lp0

    or, you can open the print cartridge door and then close it.

HP SMART INSTALL NOTES
----------------------
    The printers HP LaserJet Pro P1102, HP LaserJet Pro CP1025, and simliar
    models have a virtual CD-ROM (a fake USB CD drive) in USB mode.  You can
    disable this three ways:

    Method 1:
	NOTE: this is a non-open-source method!
	- Connect the printer to a Windows PC and turn it on.
	  The fake CD-ROM appears on Windows.
	- Insert the original Driver CD that ships with the printer
	- Run SIUtility.exe or SIUtility64.exe from the UTIL folder and
	  COMPLETELY DISABLE THIS "HP SMART INSTALL" FEATURE. 

    Method 2:
	- Install usb_modeswitch and usb_modeswitch-data from your distro's
	  repository. I.E.:
	    # yum install usb_modeswitch usb_modeswitch-data
	  OR
	    $ sudo apt-get install usb-modeswitch-data
	  OR
	    Surf to: http://www.draisberghof.de/usb_modeswitch/
	- Power cycle the printer.

    Method 3:
	NOTE: this is a non-open-source method!
	- Execute:
	    $ wget http://hplipopensource.com/hplip-web/smartinstall/\
		SmartInstallDisable-Tool.run
	    $ sh SmartInstallDisable-Tool.run

PSUTILS AND 2/4-UP CAPABILITY
-----------------------------
    If you would like to use the 2-up/4-up capability, then you need to
    get and install Angus Duggan's excellent psutils package.  You can
    find the source code for psutils here:

	http://knackered.knackered.org/angus/psutils/index.html

    Or an RPM here:

	http://rpmfind.net/linux/rpm2html/search.php?query=psutils

CUSTOM PAGE SIZE
----------------

    Append "PageSize=Custom.MMMxNNNin" to the lpr command.  E.G.

    $ lpr -P hp2600 -o media=letter -o PageSize=Custom.4x6in ~/testpage.ps
    $ lpr -P hp2600 -o media=letter -o PageSize=Custom.10x15cm ~/testpage.ps
    $ lpr -P hp1020 -o media=letter -o PageSize=Custom.4x6in ~/testpage.ps

    Or, use a GUI that allows the custom size parameters, e.g.
    "evince" - PostScript and PDF File Viewer.

SET DEFAULT MEDIA WITH CUPS
---------------------------
    $ sudo
    # lpoptions -o media=A4
	-OR-
    # lpoptions -o media=Letter

MANUAL DUPLEX
-------------

    See:
	https://sourceforge.net/projects/g-manual-duplex/

	Install:
	    $ make
	    $ su
	    # make install      -OR-    $ sudo make install
	    [logout]
	    [login]

	Then:
	    Using the Gnome 2 or Gnome-3 Classic (fallback) GUI:
	    1a)     System Tools -> Gnome Manual Duplex
		    - OR -
	    1b)     Add to Panel -> Gnome Manual Duplex applet -> Add
	    2)      Print -> GnomeManualDuplex (Virtual Printer) -> Print

	    Using the Gnome 3 Shell GUI:
	    1)      $ gnome-session-properties
		    Startup Programs -> GnomeManualDuplex -> Enable
		    [logout][login]
	    2)      Print -> GnomeManualDuplex (Virtual Printer) -> Print

	    Works with *.ps and *.pdf files.
	    Works with Gnome-2 or Gnome-3.

	- Print odd pages
	- Wait for confimation message
	- Insert in the same orientation into the printer
	- Print reverse even pages

	Howto (video):
	    http://www.youtube.com/watch?v=c4Ghomz6RQI

    -OR-
	$ psmandup [options] file.ps
	
	Ref:
	    Fedora: # yum install a2ps
	    Ubuntu: $ sudo apt-get install a2ps

    -OR- (Gnome)
	Print -> Page Setup -> Only print -> Odd Sheets

	then:

	Print -> Page Setup -> Only print -> Even Sheets

    -OR- (Gnome)
	Print -> Job -> Odd Pages

	then:

	Print -> Job -> Even Pages 

    -OR- (KDE)
	Okular -> Print -> Copies -> Page Set -> Odd Pages

	then:

	Okular -> Print -> Copies -> Page Set -> Even Pages

    Ref:
	http://bugzilla.gnome.org/show_bug.cgi?id=520598

UPDATE
------
    Here are handy lines you can click on to get the latest version:

	http://foo2zjs.rkkda.com/
	wget http://foo2zjs.rkkda.com/foo2zjs.tar.gz

    My advice: update early and often!!!!

UNINSTALLING
------------
    This will uninstall everything from your system.

    $ su
    # make uninstall

BUG REPORTS
-----------
    PLEASE use the forums at:
	http://foo2zjs.rkkda.com/forum/index.php

    I do not read or reply to HTML email or messages sent under an alias.
    I failed out of french class, so don't even think about sending
    me email in anything but English.

    Rick Richardson

DEVELOPER AND DEBUGGING TIPS
----------------------------
    If you want to work on this program, I recommend creating a "raw"
    printer queue directed at the printer, with no protocol conversions.
    OR, simple copy the file to /dev/usb/lp0 (USB) or nc (netcat) the
    file (network).

    Then, you can use the "foo2zjs-wrapper" program to convert Postscript
    test programs to ZjS format, and inspect them with "zjsdecode" before
    deciding whether to print them or not.  For example:

	foo2zjs-wrapper testpage.ps > testpage.zm
	foo2zjs-wrapper -c testpage.ps > testpage.zc

	zjsdecode < testpage.zm
	zjsdecode < testpage.zc

	lpr -Praw testpage.zm
	    OR
	cp testpage.zm /dev/usb/lp0
	    OR
	nc 192.168.1.NNN 9100 < testpage.zm

    Same thing for the other drivers, e.g. ...

	foo2hiperc-wrapper testpage.ps > testpage.hc
	hipercdecode < testpage.hc
	nc 192.168.1.NNN 9100 < testpage.hc

    If the printer is an HP LaserJet 10xx or P1xxx and needs to have the
    firmware downloaded, this will tell you (P1006):
	Before:
	    usb_printerid /dev/usb/lp0
	    MFG:Hewlett-Packard;MDL:HP LaserJet P1006;CMD:ACL;CLS:PRINTER;\
		DES:HP LaserJet P1006;

	After:
	    usb_printerid /dev/usb/lp0
	    MFG:Hewlett-Packard;MDL:HP LaserJet P1006;CMD:ACL;CLS:PRINTER;\
		DES:HP LaserJet P1006;FWVER:20080415;

CUSTOM ICC/ICM COLOR PRINTER PROFILE (BUY)
------------------------------------------

    I need:
	Dell 1355 or Xerox 6015		default resolution
	Samsung CLP-315			default resolution
	Samsung CLP-325			default resolution
	Samsung CLP-365			default resolution
	Samsung CLP-600			default resolution
	Samsung CLP-610			default resolution
	Samsung CLP-620			default resolution
	HP Color LaserJet 1500		default resolution
	HP Color LaserJet CP1215	default resolution, 1-bit and 2-bit
	HP Color LaserJet 2600n		2-bit, default resolution

    0)	Pick a vendor, e.g.
	    google: "Custom Printer Profiles"

	    MadManChan's Custom Printer Profiles
	    http://people.csail.mit.edu/ericchan/photos/profiles.html
	    Cost: 20 dollars

	    PC35 PhotoLab Custom Printer Profiling Services
	    http://printerprofiles.homestead.com/
	    Cost: 30 dollars

	    Cathy's Profiles
	    http://www.cathysprofiles.com/
	    Cost: 35 dollars

	    "Custom ICC ICM colour printer profile RGB or CMYK"
	    Seller: personalised101
	    http://stores.ebay.ie/The-Graphics-Depot 
	    Cost: 10 pounds

	    "We Create a Custom ICC Profile for Your Printer-"
	    Seller: fotojimbo
	    http://search.ebay.com/_W0QQsassZfotojimbo
	    Cost: 10 dollars

	    "Custom Color ICC Profile Printer Epson HP Canon 3800"
	    Seller: Booksmart Studio
	    http://stores.shop.ebay.com/Booksmart-Studio
	    Cost: 25 dollars

    1)	Convert the vendor sheet(s) from *.tif to page*.ps (OPTIONAL)

	    $ gimp

		OR

	    Preferred, using ImageMagick's "convert"
	    $ convert Color\ Patch\ RGB\ \(Page\ 1\).tif page1.ps
	    $ convert Color\ Patch\ RGB\ \(Page\ 2\).tif page2.ps

		OR

	    From *.jpg to *.ps
	    $ convert a300DPI_i1-RGB-1.5.jpg -rotate 90 -density 300x300 \
		-quality 100 page1.ps

    2)	Print the Postscript vendor sheet(s) with NO color correction:

	    $ foo2hp2600-wrapper -c -C10 -Gnone.icm page1.ps > test1.prn

	    $ nc 192.168.1.xxxxxxx 9100 < test1.prn
		OR
	    $ cp test1.prn /dev/usb/lp0

	    repeat for page2.ps (if necessary).

    3)	Send them to the vendor by POSTAL MAIL

    4)	Get back *.icc/*.icm profile by EMAIL or WEB

    5)	Put it in /usr/share/foo2hp/icm/testing.icm

    6)	Print a test picture:

	    $ foo2hp2600-wrapper -c -C10 -Gtesting.icm \
		picture.ps > picture.prn

	    $ nc 192.168.1.xxxxxxx 9100 < picture.prn
		OR
	    $ cp picture.prn /dev/usb/lp0

    7)	If it is OK, send "testing.icm" to rick.richardson@comcast.net
	for inclusion in foo2zjs.

    Other printers: use foo2qpdl-wrapper and /usr/share/foo2qpdl/icm/
    Other printers: use foo2lava-wrapper and /usr/share/foo2lava/icm/

CUSTOM ICC/ICM COLOR PRINTER PROFILE (ARGYLL)
---------------------------------------------
    Reference:
	firefox http://www.xritephoto.com/html/colormunkisplash.htm
	firefox http://www.argyllcms.com/
	man printer-profile

    DON'T DO THIS ON A 32-BIT (i386) PROCESSOR!
	Ghostscript (8.63) has problems.  Weird color profile data.

    ONLY DO THIS ON A 64-BIT (x86_64)PROCESSOR.
	But, you can use the color profile on i386 and x86_64.

    YOU HAVE BEEN WARNED!!!

    Execute:
	$ man printer-profile
	$ printer-profile  manuf model [rgb|cmyk] [patches] [ink-limit]

    If it is OK, send "testing.icm" to rick.richardson@comcast.net
	for inclusion in foo2zjs.
